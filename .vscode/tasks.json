{
	"version": "2.0.0",
	"tasks": [
		{
			"label": "STONE: Audit + Fix (Premium restore)",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-File",
				"${workspaceFolder}/scripts/ts-90-stone-audit-and-fix.ps1",
				"-SandboxPath",
				"${workspaceFolder}/../tillerstead-sandbox"
			],
			"problemMatcher": [],
			"group": "build"
		},
		{
			"label": "Sync Thumbtack Reviews",
			"type": "shell",
			"command": "npm run sync:thumbtack",
			"problemMatcher": [],
			"options": {
				"cwd": "${workspaceFolder}"
			},
			"group": "build"
		},
		{
			"label": "Dev server",
			"type": "shell",
			"command": "npm run dev",
			"group": "build",
			"isBackground": true,
			"problemMatcher": []
		},
		{
			"label": "Build site",
			"type": "npm",
			"script": "build",
			"group": "build"
		},
		{
			"label": "Test site",
			"type": "npm",
			"script": "test",
			"group": "test"
		},
		{
			"label": "Kill stuck git (rebase editor)",
			"type": "shell",
			"command": "taskkill",
			"args": [
				"/F",
				"/IM",
				"git.exe"
			],
			"isBackground": false
		},
		{
			"label": "Kill stuck editor (vim/nvim)",
			"type": "shell",
			"command": "taskkill",
			"args": [
				"/F",
				"/IM",
				"vim.exe",
				"/IM",
				"nvim.exe",
				"/IM",
				"vi.exe"
			],
			"isBackground": false
		},
		{
			"label": "Git status (rebase)",
			"type": "shell",
			"command": "git",
			"args": [
				"status"
			],
			"isBackground": false
		},
		{
			"label": "Git status -sb",
			"type": "shell",
			"command": "git",
			"args": [
				"status",
				"-sb"
			],
			"isBackground": false
		},
		{
			"label": "Git recent log",
			"type": "shell",
			"command": "git",
			"args": [
				"--no-pager",
				"log",
				"--oneline",
				"--decorate",
				"-10"
			],
			"isBackground": false
		},
		{
			"label": "Git branches",
			"type": "shell",
			"command": "git",
			"args": [
				"branch",
				"-vv"
			],
			"isBackground": false
		},
		{
			"label": "Git porcelain2 (head)",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"git status --porcelain=2 --branch | Select-Object -First 30 | ForEach-Object { $_.ToString() }"
			],
			"isBackground": false
		},
		{
			"label": "Git porcelain2 branch lines",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"git status --porcelain=2 --branch | Select-String '^#' | ForEach-Object { $_.Line }"
			],
			"isBackground": false
		},
		{
			"label": "Check rebase state",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"$rm = git rev-parse --git-path rebase-merge; $ra = git rev-parse --git-path rebase-apply; Write-Output \"rebase-merge: $rm exists=$([bool](Test-Path $rm))\"; Write-Output \"rebase-apply: $ra exists=$([bool](Test-Path $ra))\""
			],
			"isBackground": false
		},
		{
			"label": "Rebase continue (no editor)",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"$env:GIT_EDITOR='true'; git rebase --continue"
			],
			"isBackground": false
		},
		{
			"label": "Rebase continue (no editor)",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"$env:GIT_EDITOR = \"true\"; git rebase --continue"
			],
			"isBackground": false
		},
		{
			"label": "Rebase continue (no editor cmd)",
			"type": "shell",
			"command": "cmd",
			"args": [
				"/c",
				"set GIT_EDITOR=true&& git rebase --continue"
			],
			"isBackground": false
		},
		{
			"label": "Rebase conflicts list",
			"type": "shell",
			"command": "git",
			"args": [
				"diff",
				"--name-only",
				"--diff-filter=U"
			],
			"isBackground": false
		},
		{
			"label": "Rebase unmerged (porcelain filter)",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"git status --porcelain=v1 | Select-String '^(UU|AA|DD|AU|UA|DU|UD)' | ForEach-Object { $_.Line }"
			],
			"isBackground": false
		},
		{
			"label": "Rebase unmerged (porcelain filter 2)",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"git status --porcelain=v1 | Select-String \"^(UU|AA|DD|AU|UA|DU|UD)\" | ForEach-Object { $_.Line }"
			],
			"isBackground": false
		},
		{
			"label": "Rebase header lines",
			"type": "shell",
			"command": "cmd",
			"args": [
				"/c",
				"git status --porcelain=2 --branch --untracked-files=no | findstr /B #"
			],
			"isBackground": false
		},
		{
			"label": "Rebase todo/done",
			"type": "shell",
			"command": "cmd",
			"args": [
				"/c",
				"echo DONE: & type .git\\rebase-merge\\done & echo. & echo TODO: & type .git\\rebase-merge\\git-rebase-todo"
			],
			"isBackground": false
		},
		{
			"label": "Rebase current step info",
			"type": "shell",
			"command": "cmd",
			"args": [
				"/c",
				"dir /b .git\\rebase-merge && echo. && if exist .git\\rebase-merge\\current (echo current: & type .git\\rebase-merge\\current) && if exist .git\\rebase-merge\\stopped-sha (echo stopped-sha: & type .git\\rebase-merge\\stopped-sha) && if exist .git\\rebase-merge\\message (echo message: & type .git\\rebase-merge\\message)"
			],
			"isBackground": false
		},
		{
			"label": "Rebase stopped sha/message",
			"type": "shell",
			"command": "cmd",
			"args": [
				"/c",
				"echo stopped-sha: & type .git\\rebase-merge\\stopped-sha & echo. & echo message: & type .git\\rebase-merge\\message"
			],
			"isBackground": false
		},
		{
			"label": "Stage conflict resolutions",
			"type": "shell",
			"command": "git",
			"args": [
				"add",
				"assets/css/mobile-optimizations.css",
				"assets/css/footer.css"
			],
			"isBackground": false
		},
		{
			"label": "Rebase continue (cmd, editor=true)",
			"type": "shell",
			"command": "cmd",
			"args": [
				"/c",
				"set GIT_EDITOR=true&& git rebase --continue"
			],
			"isBackground": false
		},
		{
			"label": "List unmerged index entries",
			"type": "shell",
			"command": "git",
			"args": [
				"ls-files",
				"-u"
			],
			"isBackground": false
		},
		{
			"label": "Rebase continue (plain)",
			"type": "shell",
			"command": "git",
			"args": [
				"rebase",
				"--continue"
			],
			"isBackground": false
		},
		{
			"label": "Unstaged changes list",
			"type": "shell",
			"command": "cmd",
			"args": [
				"/c",
				"git diff --name-only"
			],
			"isBackground": false
		},
		{
			"label": "Stage tasks.json fix",
			"type": "shell",
			"command": "git",
			"args": [
				"add",
				".vscode/tasks.json"
			],
			"isBackground": false
		},
		{
			"label": "Is tasks.json tracked?",
			"type": "shell",
			"command": "git",
			"args": [
				"ls-files",
				"--",
				".vscode/tasks.json"
			],
			"isBackground": false
		},
		{
			"label": "Stage tasks.json update (-u)",
			"type": "shell",
			"command": "git",
			"args": [
				"add",
				"-u",
				"--",
				".vscode/tasks.json"
			],
			"isBackground": false
		},
		{
			"label": "Unstaged changes list (after stage)",
			"type": "shell",
			"command": "cmd",
			"args": [
				"/c",
				"git diff --name-only"
			],
			"isBackground": false
		},
		{
			"label": "Force-stage tasks.json",
			"type": "shell",
			"command": "git",
			"args": [
				"add",
				"-f",
				".vscode/tasks.json"
			],
			"isBackground": false
		},
		{
			"label": "Build site",
			"type": "shell",
			"command": "npm run build:site"
		},
		{
			"label": "Deploy to GitHub Pages",
			"type": "shell",
			"command": "git add . && git commit -m \"Deploy: GitHub Pages + Railway migration\" && git push origin main"
		},
		{
			"label": "Deploy to GitHub Pages (fixed)",
			"type": "shell",
			"command": "git add . && git commit -m \"Deploy: GitHub Pages and Railway migration\" || echo \"No changes to commit\" && git push origin main"
		},
		{
			"label": "Build site",
			"type": "shell",
			"command": "npm run build:site"
		},
		{
			"label": "Build site",
			"type": "shell",
			"command": "npm run build:site"
		},
		{
			"label": "Build site",
			"type": "shell",
			"command": "npm run build:site"
		},
		{
			"label": "Build site",
			"type": "shell",
			"command": "npm run build:site"
		},
		{
			"label": "Build site",
			"type": "shell",
			"command": "npm run build:site"
		}
	]
}
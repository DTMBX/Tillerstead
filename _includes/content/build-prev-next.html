{% assign build_pages = site.pages | where_exp: "p", "p.build_order" | sort: "build_order" %}
{% assign idx = nil %}

{% for p in build_pages %}
  {% if p.url == page.url %}
    {% assign idx = forloop.index0 %}
  {% endif %}
{% endfor %}

{% if idx != nil %}
  {% assign prev_i = idx | minus: 1 %}
  {% assign next_i = idx | plus: 1 %}
  {% assign prev_p = build_pages[prev_i] %}
  {% assign next_p = build_pages[next_i] %}

  <nav class="build-prev-next" aria-label="Build phase navigation">
    <div class="build-prev-next__grid">
      <div>
        {% if prev_p %}
          <a class="build-prev-next__link" href="{{ prev_p.url | relative_url }}">
            ← Step {{ prev_p.build_order }}: {{ prev_p.title }}
          </a>
        {% endif %}
      </div>

      <div style="text-align:right">
        {% if next_p %}
          <a class="build-prev-next__link" href="{{ next_p.url | relative_url }}">
            Step {{ next_p.build_order }}: {{ next_p.title }} →
          </a>
        {% endif %}
      </div>
    </div>
  </nav>
{% endif %}
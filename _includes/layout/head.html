<!-- Jekyll include: no DOCTYPE needed, ensure space indentation -->
<meta charset="utf-8" />
  <!-- EMERGENCY CONTRAST FIX - LOAD FIRST -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=yes, maximum-scale=5.0, minimum-scale=1.0" />

<!-- Modern device hints -->
<meta name="mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="format-detection" content="telephone=yes" />
<meta name="HandheldFriendly" content="true" />

<!-- Mobile CSS Fixes (CRITICAL - Load Early) -->
<link rel="stylesheet" href="/assets/css/mobile-master-fix.css" />
<link rel="stylesheet" href="/assets/css/mobile-emergency-fix.css" />

<!-- Security Headers (Client-Side) -->
<meta http-equiv="X-Content-Type-Options" content="nosniff" />
<meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin" />
<meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()" />
<meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://www.google-analytics.com https://www.googletagmanager.com; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self' https://www.google-analytics.com; frame-src https://www.google.com; object-src 'none'; base-uri 'self'; form-action 'self';" />

<meta name="color-scheme" content="light dark" />
<meta name="theme-color" content="#10b981" media="(prefers-color-scheme: light)" />
<meta name="theme-color" content="#059669" media="(prefers-color-scheme: dark)" />

<!-- Early accessibility preference detection (runs before render to prevent flash) -->
<script>
(function(){
  var d=document.documentElement,m=window.matchMedia;
  // Reduced motion
  if(m('(prefers-reduced-motion:reduce)').matches)d.classList.add('reduce-motion');
  // High contrast / forced colors
  if(m('(forced-colors:active)').matches||m('(prefers-contrast:more)').matches)d.setAttribute('data-high-contrast','true');
  // Color scheme
  if(m('(prefers-color-scheme:dark)').matches)d.setAttribute('data-color-scheme','dark');
  // Touch device
  if(m('(pointer:coarse)').matches){d.setAttribute('data-pointer','coarse');d.classList.add('touch-friendly');}
  // No hover
  if(m('(hover:none)').matches)d.setAttribute('data-hover','none');
  // Reduced transparency
  if(m('(prefers-reduced-transparency:reduce)').matches)d.setAttribute('data-reduced-transparency','true');
  // Inverted colors
  if(m('(inverted-colors:inverted)').matches)d.setAttribute('data-inverted-colors','true');
  // Load saved user preferences
  try{var p=JSON.parse(localStorage.getItem('tillerstead-a11y-prefs')||'{}');
    if(p.highContrast)d.setAttribute('data-high-contrast','true');
    if(p.textSize)d.setAttribute('data-text-size',p.textSize);
    if(p.reducedMotion)d.classList.add('reduce-motion');
  }catch(e){}
})();
</script>

<title>{% if page.meta_title %}{{ page.meta_title | strip | escape }}{% elsif page.title %}{{ page.title | strip | escape }} | {{ site.title | strip | escape }}{% else %}{{ site.title | strip | escape }}{% endif %}</title>

{% if page.meta_description %}
<meta name="description" content="{{ page.meta_description | strip_html | strip_newlines | truncate: 160 | escape }}" />
{% elsif page.description %}
<meta name="description" content="{{ page.description | strip_html | strip_newlines | truncate: 160 | escape }}" />
{% elsif site.description %}
<meta name="description" content="{{ site.description | strip_html | strip_newlines | truncate: 160 | escape }}" />
{% endif %}

{% if page.keywords %}
<meta name="keywords" content="{{ page.keywords | join: ', ' | escape }}" />
{% elsif site.keywords %}
<meta name="keywords" content="{{ site.keywords | join: ', ' | escape }}" />
{% endif %}

<meta name="author" content="Tillerstead LLC" />
<meta name="robots" content="{{ page.robots | default: 'index, follow' }}" />

<!-- DNS Prefetch & Preconnect for external resources -->
<link rel="dns-prefetch" href="//www.google-analytics.com" />
<link rel="dns-prefetch" href="//www.googletagmanager.com" />
<link rel="dns-prefetch" href="//www.thumbtack.com" />
<link rel="dns-prefetch" href="//www.acornfinance.com" />
<link rel="dns-prefetch" href="//newjersey.mylicense.com" />
<link rel="preconnect" href="https://www.thumbtack.com" crossorigin />
<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />

<!-- Favicons & App Icons -->
{% include icons/favicon-meta.html %}

<!-- Resource Hints: Preload critical CSS (render-blocking) -->
<link rel="preload" href="{{ '/assets/css/root-vars.css' | relative_url }}" as="style" />
<link rel="preload" href="{{ '/assets/css/main.css' | relative_url }}" as="style" />
{% if page.url == '/' %}
<link rel="preload" href="{{ '/assets/css/pages/home.css' | relative_url }}" as="style" />
{% endif %}

<!-- Prefetch hints for frequently accessed pages (faster perceived navigation) -->
{% unless page.url == '/contact/' or page.url == '/contact.html' %}
<link rel="prefetch" href="{{ '/contact/' | relative_url }}" as="document" />
{% endunless %}
{% unless page.url == '/services/' or page.url == '/services.html' %}
<link rel="prefetch" href="{{ '/services/' | relative_url }}" as="document" />
{% endunless %}
{% unless page.url == '/portfolio/' or page.url == '/portfolio.html' %}
<link rel="prefetch" href="{{ '/portfolio/' | relative_url }}" as="document" />
{% endunless %}
{% if page.url == '/' %}
<!-- Homepage visitors likely to navigate to these pages -->
<link rel="prefetch" href="{{ '/about/' | relative_url }}" as="document" />
<link rel="prefetch" href="{{ '/homeowner-resources/' | relative_url }}" as="document" />
{% endif %}

<!-- Core & Utility CSS: Load modern design system first, then legacy compatibility -->
<!-- EMERGENCY MOBILE LAYOUT FIX - Load ABSOLUTE FIRST -->
<link rel="stylesheet" href="{{ '/assets/css/mobile-layout-emergency.css' | relative_url }}" />

<!-- EMERGENCY MOBILE FIX - Load FIRST for critical rendering -->
<link rel="stylesheet" href="{{ '/assets/css/mobile-emergency-fix.css' | relative_url }}" />

<!-- PREMIUM FEATURES - Modern animations & components -->
<link rel="stylesheet" href="{{ '/assets/css/premium-animations.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/premium-components.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/interactive-components.css' | relative_url }}" />

<!-- MODERN DESIGN SYSTEM -->
<link rel="stylesheet" href="{{ '/assets/css/modern/modern.css' | relative_url }}" />

<!-- Legacy CSS (for compatibility) -->
<link rel="stylesheet" href="{{ '/assets/css/scaling-fixes.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/root-vars.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/design-system.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/mobile-optimizations.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/mobile-premium.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/mobile-app.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/mobile-personality.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/hero-patterns.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/tile-patterns.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/tile-integrations.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/retro-enhancements.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/logo-wolf-crest.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/urgency-indicators.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/footer.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/visual-enhancements.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/accessibility.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/accessibility-enhanced.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/mobile-thumb-zones.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/modern-devices.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/nav-drawer.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/navigation.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/animations.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/professional-features.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/carousel-premium.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/form-premium.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/components/service-cards.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/components/forms.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/page-theme.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/card-grid-bg.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/4k-scaling.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/button-contrast-fix.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/header-nav-fixed.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/nav-hero-text-fix.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/mobile-ios-fixes.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/color-contrast-standard.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/message-animations.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/header-nav-critical-fixes.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/header-nav-enhanced.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/header-emergency-fix.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/desktop-layout-fix.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/critical-ux-fixes.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/contrast-alignment-fix.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/navigation-complete.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/popup-fixes.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/components/post-footer.css' | relative_url }}" />

<!-- Revenue Generation Components -->
<link rel="stylesheet" href="{{ '/assets/css/components/sticky-cta.css' | relative_url }}" />
<link rel="stylesheet" href="{{ '/assets/css/components/lead-magnet.css' | relative_url }}" />

<!-- UX Enhancements -->
<link rel="stylesheet" href="{{ '/assets/css/ux-enhancements.css' | relative_url }}" />

{% if page.layout == 'build-page' %}
<link rel="stylesheet" href="{{ '/assets/css/build-guide.css' | relative_url }}" />
{% endif %}
{% if page.url == '/homeowner-resources/' %}
<link rel="stylesheet" href="{{ '/assets/css/pages/resources.css' | relative_url }}" />
{% endif %}
{% if page.url == '/tile-visualizer.html' %}
<link rel="stylesheet" href="{{ '/assets/css/tile-visualizer.css' | relative_url }}" />
{% endif %}

<!-- Page-specific stylesheets -->
{% if page.stylesheets %}
  {% for stylesheet in page.stylesheets %}
  <link rel="stylesheet" href="{{ stylesheet | relative_url }}" />
  {% endfor %}
{% endif %}

<!-- CRITICAL: Mobile fix MUST load last to override all other CSS -->
<link rel="stylesheet" href="{{ '/assets/css/mobile-critical-fix.css' | relative_url }}" />

<!-- Page-specific scripts -->
{% if page.scripts %}
  {% for script in page.scripts %}
  <script src="{{ script | relative_url }}" defer></script>
  {% endfor %}
{% endif %}

<!-- Prefetch secondary pages for instant navigation -->
{% if page.url == '/' %}
<link rel="prefetch" href="{{ '/portfolio/' | relative_url }}" as="document" />
<link rel="prefetch" href="{{ '/contact/' | relative_url }}" as="document" />
<link rel="prefetch" href="{{ '/services/' | relative_url }}" as="document" />
{% endif %}

<!-- Page-specific styles/scripts can be added below -->
{% if page.extra_head %}{{ page.extra_head }}{% endif %}


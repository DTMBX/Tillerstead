{%- comment -%} FAQ Section Include Renders a reusable FAQ section with optional
schema.org markup. Usage: {% include features/faq-section.html title="Your
Title" description="..." items=page.faq_items schema=true %} {%- endcomment -%}
{%- capture faq_title -%}{{ include.title | default: "Frequently Asked
Questions" }}{%- endcapture -%} {%- capture faq_id -%}{{ include.id | default:
"faq-section" }}{%- endcapture -%}

<section
  class="ts-section ts-faq {% if include.bg_class %}{{ include.bg_class }}{% else %}bg-soft{% endif %}"
  aria-labelledby="{{ faq_id }}"
>
  <div class="container">
    <header class="section-header text-center">
      {% if include.eyebrow %}
      <span class="eyebrow eyebrow--dark">{{ include.eyebrow }}</span>
      {% endif %}
      <h2 id="{{ faq_id }}" class="heading-2">{{ faq_title }}</h2>
      {% if include.description %}
      <p class="lead">{{ include.description }}</p>
      {% endif %}
    </header>

    <div class="faq">
      {%- if include.items -%} {%- for item in include.items -%}
      <details class="faq-item" {% if item.open %}open{% endif %}>
        <summary>{{ item.question }}</summary>
        <div class="faq-body">{{ item.answer | markdownify }}</div>
      </details>
      {%- endfor -%} {%- endif -%}
    </div>
  </div>
</section>

{%- if include.schema == true and include.items -%}
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {%- for item in include.items -%}
      {
        "@type": "Question",
        "name": "{{ item.question | escape }}",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "{{ item.answer | strip_html | escape }}"
        }
      }{% unless forloop.last %},{% endunless %}
      {%- endfor -%}
    ]
  }
</script>
{%- endif -%}


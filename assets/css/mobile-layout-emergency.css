/* MOBILE LAYOUT FIX - Emergency Override */

/* Force hide all popups, modals, and overlays on mobile */
@media (max-width: 768px) {
  /* CRITICAL: Disable mobile nav drawer system */
  .mobile-nav__toggle,
  .mobile-nav,
  .mobile-nav[aria-hidden="false"],
  #mobile-nav-drawer,
  .nav-drawer,
  #mobile-nav,
  .mobile-nav-shell,
  .hamburger-icon,
  .mobile-nav__close,
  .mobile-nav__header,
  .mobile-nav__body {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
    transform: translateX(100%) !important;
    background: transparent !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }
  
  /* CRITICAL: Hide ALL floating action buttons and toolbars */
  .mobile-fab,
  .fab,
  .floating-action-button,
  [class*="fab-"],
  [class*="-fab"],
  .a11y-toolbar,
  .accessibility-toolbar,
  [class*="a11y"],
  [aria-label*="Accessibility"],
  button[class*="float"] {
    display: none !important;
    opacity: 0 !important;
    visibility: hidden !important;
    pointer-events: none !important;
  }

  /* Hide performance mode toggle */
  #performance-toggle,
  .performance-toggle,
  [data-performance-toggle],
  .perf-mode-toggle {
    display: none !important;
  }

  /* Hide all toast notifications on load */
  .toast,
  .toast-container,
  .notification-banner,
  .scheduling-banner {
    display: none !important;
    opacity: 0 !important;
    pointer-events: none !important;
  }

  /* Hide message system popups */
  [class*="message-"],
  [id*="message-"],
  .message-overlay,
  .message-popup {
    display: none !important;
  }

  /* Hide lightbox and modals */
  .lightbox,
  .modal,
  .modal-overlay,
  [data-lightbox],
  [role="dialog"]:not(.ts-main-content) {
    display: none !important;
  }

  /* CRITICAL: Force proper document flow */
  html {
    overflow-y: auto !important;
    overflow-x: hidden !important;
    height: auto !important;
    position: relative !important;
  }

  body {
    overflow-y: auto !important;
    overflow-x: hidden !important;
    height: auto !important;
    position: relative !important;
    display: flex !important;
    flex-direction: column !important;
    min-height: 100vh !important;
  }

  /* CRITICAL: Header at top */
  header,
  .site-header,
  .ts-header,
  [role="banner"] {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    position: relative !important;
    z-index: 100 !important;
    order: 1 !important;
    width: 100% !important;
  }

  /* CRITICAL: Main content in middle, ALWAYS visible */
  main,
  [role="main"],
  .ts-main-content,
  #main-content {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    position: relative !important;
    z-index: 1 !important;
    order: 2 !important;
    flex: 1 !important;
    width: 100% !important;
  }

  /* CRITICAL: All sections must be visible */
  main section,
  main article,
  main div {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    position: relative !important;
  }

  /* CRITICAL: Footer at bottom */
  footer,
  .site-footer,
  .ts-footer,
  [role="contentinfo"] {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    position: relative !important;
    z-index: 10 !important;
    order: 3 !important;
    width: 100% !important;
    margin-top: auto !important;
  }

  /* Hide footer trademark if it's floating */
  .footer-trademark {
    position: relative !important;
    bottom: auto !important;
    left: auto !important;
    right: auto !important;
  }

  /* Fix animations hiding content */
  [data-animate] {
    opacity: 1 !important;
    transform: none !important;
    animation: none !important;
  }

  /* Disable scroll progress bar on mobile */
  .scroll-progress,
  [data-scroll-progress] {
    display: none !important;
  }

  /* Reset z-index chaos - ONLY these elements get z-index */
  * {
    z-index: auto !important;
  }

  /* Priority z-index for essential elements ONLY */
  header,
  .site-header,
  .ts-header,
  nav,
  .navigation,
  [role="banner"],
  [role="navigation"] {
    z-index: 100 !important;
  }

  main,
  [role="main"],
  section,
  article {
    z-index: 1 !important;
  }

  footer,
  .site-footer,
  [role="contentinfo"] {
    z-index: 10 !important;
  }

  /* Remove ALL fixed positioning on mobile */
  [style*="position: fixed"],
  [style*="position:fixed"] {
    position: relative !important;
  }

  /* Force relative positioning */
  .fixed,
  [class*="fixed"] {
    position: relative !important;
  }

  /* Remove gradient mesh overlays on mobile */
  .gradient-mesh {
    position: relative !important;
    z-index: auto !important;
    pointer-events: auto !important;
  }

  /* Ensure bento grids don't overflow */
  .bento-grid,
  .bento-item {
    max-width: 100% !important;
    overflow: visible !important;
  }

  /* Fix glass cards blocking content */
  .glass-card {
    position: relative !important;
    z-index: auto !important;
  }

  /* Disable magnetic buttons on mobile (they cause issues) */
  [data-magnetic] {
    pointer-events: auto !important;
  }

  [data-magnetic]::before {
    display: none !important;
  }

  /* Disable parallax on mobile */
  [data-parallax] {
    transform: none !important;
  }

  /* Fix any accidentally hidden sections */
  .hero,
  .services,
  .portfolio,
  .contact,
  .testimonials,
  .process,
  .materials,
  .faq,
  .cta {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
  }

  /* Ensure content wrapper is visible */
  .content,
  .content-wrapper,
  .page-content,
  .site-content {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
  }

  /* CRITICAL: Force ALL sections and divs inside main to be visible */
  main > *,
  main section,
  main section > *,
  main div,
  main article,
  #hero,
  #trust,
  #services,
  #tillerpro,
  #testimonials,
  #why-us,
  #process,
  #portfolio,
  #materials,
  #faq,
  .gradient-mesh,
  .gradient-mesh > * {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    position: relative !important;
    height: auto !important;
    max-height: none !important;
    min-height: 0 !important;
    overflow: visible !important;
  }

  /* Force show ALL elements with data-animate */
  [data-animate],
  [data-animate="fade"],
  [data-animate="fade-up"],
  [data-animate="fade-down"],
  [data-delay] {
    opacity: 1 !important;
    visibility: visible !important;
    transform: none !important;
    animation: none !important;
    transition: none !important;
  }

  /* Force hero section to be visible */
  .hero-3d,
  .page-depth {
    opacity: 1 !important;
    visibility: visible !important;
    display: block !important;
  }
}

/* Desktop - allow these features */
@media (min-width: 769px) {
  /* Allow toasts on desktop */
  .toast-container {
    position: fixed;
    top: 1rem;
    right: 1rem;
    z-index: 10000;
  }

  /* Allow modals on desktop */
  .lightbox,
  .modal {
    position: fixed;
    z-index: 9999;
  }

  /* Performance toggle on desktop */
  #performance-toggle {
    position: fixed;
    bottom: 20px;
    left: 20px;
    z-index: 1000;
  }
}

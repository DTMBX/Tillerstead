/**
 * ============================================================================
 * TILLERSTEAD ACCESSIBILITY SYSTEM
 * ============================================================================
 * Comprehensive accessibility support for all disability types:
 * - Visual: High contrast, screen readers, focus indicators, color blindness
 * - Motor: Keyboard navigation, large targets, reduced motion
 * - Cognitive: Clear focus, consistent layouts, readable text
 * - Hearing: Visual alternatives to audio cues
 * 
 * WCAG 2.1 AAA Compliance Target
 * ============================================================================
 */

/* ==========================================================================
   1. SCREEN READER UTILITIES
   ========================================================================== */

/**
 * Visually hidden but accessible to screen readers
 * Use for skip links, labels, and additional context
 */
.sr-only,
.visually-hidden {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip-path: inset(50%) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

/**
 * Show element on focus (for skip links)
 */
.sr-only-focusable:focus,
.sr-only-focusable:active,
.visually-hidden-focusable:focus,
.visually-hidden-focusable:active {
  position: static !important;
  width: auto !important;
  height: auto !important;
  padding: inherit !important;
  margin: inherit !important;
  overflow: visible !important;
  clip-path: none !important;
  white-space: normal !important;
}

/**
 * Hide from screen readers only (visible but not announced)
 */
[aria-hidden="true"] {
  /* Ensure pointer events are disabled for hidden elements */
  pointer-events: none;
}

/* ==========================================================================
   2. SKIP LINKS & NAVIGATION AIDS
   ========================================================================== */

/**
 * Skip link - allows keyboard users to bypass navigation
 */
.skip-link {
  position: fixed;
  top: -100px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 100000;
  padding: 1rem 2rem;
  background: var(--tiller-color-primary, #1a2a3a);
  color: #ffffff;
  font-weight: 700;
  font-size: 1rem;
  text-decoration: none;
  border-radius: 0 0 8px 8px;
  box-shadow: 0 4px 12px rgb(0 0 0 / 30%);
  transition: top 0.2s ease-out;
}

.skip-link:focus {
  top: 0;
  outline: 3px solid var(--tiller-color-gold, #c9a227);
  outline-offset: 2px;
}

/**
 * Skip link group for multiple targets
 */
.skip-links {
  position: fixed;
  top: -200px;
  left: 0;
  right: 0;
  z-index: 100000;
  display: flex;
  justify-content: center;
  gap: 1rem;
  padding: 0.5rem;
  background: var(--tiller-color-primary, #1a2a3a);
  transition: top 0.2s ease-out;
}

.skip-links:focus-within {
  top: 0;
}

.skip-links a {
  padding: 0.75rem 1.5rem;
  background: var(--tiller-color-gold, #c9a227);
  color: var(--tiller-color-primary, #1a2a3a);
  font-weight: 700;
  text-decoration: none;
  border-radius: 4px;
}

.skip-links a:focus {
  outline: 3px solid #ffffff;
  outline-offset: 2px;
}

/* ==========================================================================
   3. FOCUS INDICATORS - WCAG 2.4.7 & 2.4.11
   ========================================================================== */

/**
 * Universal focus outline
 * Minimum 2px, high contrast, clear offset
 */
:focus {
  outline: 3px solid var(--focus-color, #0066cc);
  outline-offset: 2px;
}

:focus:not(:focus-visible) {
  outline: none;
}

:focus-visible {
  outline: 3px solid var(--focus-color, #0066cc);
  outline-offset: 2px;
}

/**
 * Enhanced focus for interactive elements
 */
a:focus-visible,
button:focus-visible,
[role="button"]:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible,
[tabindex]:focus-visible {
  outline: 3px solid var(--tiller-color-gold, #c9a227);
  outline-offset: 3px;
  box-shadow: 0 0 0 6px rgb(201 162 39 / 25%);
}

/**
 * Focus within containers (for custom components)
 */
.card:focus-within,
.ts-card:focus-within,
.nav-item:focus-within {
  outline: 2px solid var(--tiller-color-gold, #c9a227);
  outline-offset: 2px;
}

/**
 * High visibility focus for dark backgrounds
 */
.dark-bg a:focus-visible,
.dark-bg button:focus-visible,
[data-theme="dark"] a:focus-visible,
[data-theme="dark"] button:focus-visible {
  outline-color: #ffffff;
  box-shadow: 0 0 0 6px rgb(255 255 255 / 30%);
}

/* ==========================================================================
   4. REDUCED MOTION SUPPORT - WCAG 2.3.3
   ========================================================================== */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  /* Disable parallax and smooth scrolling */
  html {
    scroll-behavior: auto !important;
  }

  /* Disable transform animations */
  .animate,
  .animated,
  [data-aos],
  .fade-in,
  .slide-in {
    animation: none !important;
    opacity: 100% !important;
    transform: none !important;
  }

  /* Static carousel/slider */
  .carousel,
  .slider,
  .slideshow {
    animation: none !important;
  }

  /* Disable video autoplay backgrounds */
  video[autoplay] {
    display: none;
  }

  /* Show static alternative for video backgrounds */
  .video-bg-fallback {
    display: block !important;
  }
}

/* ==========================================================================
   5. HIGH CONTRAST MODE SUPPORT - WCAG 1.4.11
   ========================================================================== */

/**
 * Windows High Contrast Mode support
 */
@media (forced-colors: active) {
  /* Ensure borders are visible */
  *,
  *::before,
  *::after {
    border-color: currentcolor !important;
  }

  /* Make focus indicators visible */
  :focus,
  :focus-visible {
    outline: 3px solid Highlight !important;
    outline-offset: 2px !important;
  }

  /* Ensure buttons have visible borders */
  button,
  .btn,
  [role="button"],
  input[type="submit"],
  input[type="button"] {
    border: 2px solid currentcolor !important;
  }

  /* Links need underlines */
  a {
    text-decoration: underline !important;
  }

  /* Ensure form fields are visible */
  input,
  textarea,
  select {
    border: 2px solid currentcolor !important;
  }

  /* SVG icons need currentColor */
  svg {
    fill: currentcolor !important;
    stroke: currentcolor !important;
  }

  /* Disable background images */
  [style*="background-image"] {
    background-image: none !important;
    background-color: Canvas !important;
  }
}

/**
 * Custom high contrast theme (user preference)
 */
[data-high-contrast="true"],
.high-contrast {
  --tiller-bg-color: #000000;
  --tiller-text-primary: #ffffff;
  --tiller-text-secondary: #ffffff;
  --tiller-color-gold: #c9a227;
  --tiller-color-primary: #ffffff;
  --link-color: #ffffff;
  --focus-color: #10b981;

  background: #000000 !important;
  color: #ffffff !important;
}

[data-high-contrast="true"] a,
.high-contrast a {
  color: #ffffff;
  text-decoration: underline;
  transition: color 0.15s ease, text-shadow 0.15s ease;
}

[data-high-contrast="true"] a:hover,
[data-high-contrast="true"] a:focus,
.high-contrast a:hover,
.high-contrast a:focus {
  color: var(--tiller-color-gold, #c9a227);
  text-shadow: 0 0 8px rgb(201 162 39 / 70%), 0 0 20px rgb(201 162 39 / 50%), 0 0 35px rgb(201 162 39 / 30%);
}

/* Nav links handle their own styling */
[data-high-contrast="true"] .desktop-nav__link,
[data-high-contrast="true"] .mobile-nav__link,
.high-contrast .desktop-nav__link,
.high-contrast .mobile-nav__link {
  text-decoration: none;
}

/* Header company name keeps emerald glow */
[data-high-contrast="true"] .ts-header__company,
.high-contrast .ts-header__company {
  color: var(--tiller-color-emerald, #10b981) !important;
  text-shadow: 0 0 10px rgb(16 185 129 / 80%), 0 0 25px rgb(16 185 129 / 60%), 0 0 40px rgb(16 185 129 / 40%) !important;
}

[data-high-contrast="true"] button,
[data-high-contrast="true"] .btn,
.high-contrast button,
.high-contrast .btn {
  background: #ffffff;
  color: #000000;
  border: 2px solid #ffffff;
  transition: all 0.15s ease;
}

[data-high-contrast="true"] button:hover,
[data-high-contrast="true"] .btn:hover,
.high-contrast button:hover,
.high-contrast .btn:hover {
  background: var(--tiller-color-gold, #c9a227);
  border-color: var(--tiller-color-gold, #c9a227);
  box-shadow: 0 0 15px rgb(201 162 39 / 60%), 0 0 30px rgb(201 162 39 / 30%);
}

/* ==========================================================================
   5b. AUTO-DETECTED SYSTEM PREFERENCES
   ========================================================================== */

/**
 * Inverted colors support (iOS/macOS accessibility setting)
 */
@media (inverted-colors: inverted) {
  img,
  video,
  picture {
    filter: invert(100%);
  }
}

[data-inverted-colors="true"] img,
[data-inverted-colors="true"] video {
  filter: invert(100%);
}

/**
 * Reduced transparency support (macOS accessibility setting)
 */
@media (prefers-reduced-transparency: reduce) {
  *,
  *::before,
  *::after {
    backdrop-filter: none !important;
    opacity: 1 !important;
  }

  .glass,
  .frosted,
  .backdrop-blur {
    background: var(--tiller-bg-color, #ffffff) !important;
    backdrop-filter: none !important;
  }
}

[data-reduced-transparency="true"] .glass,
[data-reduced-transparency="true"] .frosted,
[data-reduced-transparency="true"] .backdrop-blur {
  background: var(--tiller-bg-color, #ffffff) !important;
  backdrop-filter: none !important;
}

/**
 * Touch device enhancements (auto-detected via pointer: coarse)
 */
@media (pointer: coarse) {
  /* Larger touch targets */
  button,
  .btn,
  [role="button"],
  a,
  input[type="submit"],
  input[type="button"],
  input[type="checkbox"],
  input[type="radio"] {
    min-height: 48px;
    min-width: 48px;
  }

  /* Increase spacing between interactive elements */
  nav a,
  nav button,
  .nav-link {
    padding: 12px 16px;
    margin: 4px;
  }

  /* Larger form inputs */
  input,
  textarea,
  select {
    min-height: 48px;
    font-size: 16px; /* Prevents iOS zoom on focus */
  }
}

.touch-friendly button,
.touch-friendly .btn,
.touch-friendly a {
  min-height: 48px;
  min-width: 48px;
  padding: 12px 24px;
}

/**
 * No hover capability (touch-only devices)
 */
@media (hover: none) {
  /* Show focus states instead of hover */
  a:hover,
  button:hover {
    /* Disable hover-only styles */
  }

  /* Make tap targets more obvious */
  a,
  button,
  [role="button"] {
    text-decoration: underline;
  }

  /* Show dropdown menus differently */
  .dropdown:hover .dropdown-menu {
    display: none;
  }
}

[data-hover="none"] .hover-only {
  display: none !important;
}

/**
 * prefers-contrast: more (macOS/iOS Increase Contrast setting)
 */
@media (prefers-contrast: more) {
  * {
    border-color: currentcolor !important;
  }

  a {
    text-decoration: underline !important;
  }

  button,
  .btn {
    border: 2px solid currentcolor !important;
  }

  /* Increase text weight for better readability */
  body {
    font-weight: 500;
  }

  h1, h2, h3, h4, h5, h6 {
    font-weight: 800;
  }
}

/**
 * prefers-contrast: less (reduce harsh contrasts)
 */
@media (prefers-contrast: less) {
  :root {
    --tiller-text-primary: #333333;
    --tiller-bg-color: #f5f5f5;
  }
}

[data-low-contrast="true"] {
  --tiller-text-primary: #333333 !important;
  --tiller-bg-color: #f5f5f5 !important;
  filter: contrast(0.9);
}

/**
 * Dark color scheme support
 */
@media (prefers-color-scheme: dark) {
  :root {
    --tiller-bg-color: #1a1a2e;
    --tiller-text-primary: #ffffff;
    --tiller-text-secondary: #cccccc;
    color-scheme: dark;
  }

  img {
    filter: brightness(0.9);
  }
}

[data-color-scheme="dark"] {
  --tiller-bg-color: #1a1a2e;
  --tiller-text-primary: #ffffff;
  --tiller-text-secondary: #cccccc;
  color-scheme: dark;
}

[data-color-scheme="dark"] img {
  filter: brightness(0.9);
}

/**
 * Light color scheme support (explicit)
 */
@media (prefers-color-scheme: light) {
  :root {
    color-scheme: light;
  }
}

[data-color-scheme="light"] {
  color-scheme: light;
}

/**
 * Larger cursor support (user preference)
 */
[data-larger-cursor="true"],
[data-larger-cursor="true"] * {
  cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' stroke='%23fff' stroke-width='2' d='M6 2L6 28L12 22L18 30L22 28L16 20L24 20Z'/%3E%3C/svg%3E") 6 2, auto;
}

/**
 * Enhanced focus highlight (extra visible focus)
 */
[data-focus-highlight="true"] :focus-visible {
  outline: 4px solid var(--tiller-color-emerald, #10b981) !important;
  outline-offset: 4px !important;
  box-shadow: 0 0 0 8px rgb(16 185 129 / 30%) !important;
}

/* ==========================================================================
   6. COLOR BLINDNESS SUPPORT
   ========================================================================== */

/**
 * Never rely on color alone - add patterns/icons
 * These classes add visual indicators beyond color
 */

/* Status indicators with icons */
.status-success::before {
  content: "âœ“ ";
}

.status-error::before {
  content: "âœ— ";
}

.status-warning::before {
  content: "âš  ";
}

.status-info::before {
  content: "â„¹ ";
}

/* Required field indicator */
.required-field::after,
[aria-required="true"]::after {
  content: " *";
  color: var(--tiller-color-error, #e85a50);
}

/* Link indicators */
a[href^="http"]:not([href*="tillerstead"])::after,
a[rel*="external"]::after {
  content: " â†—";
  font-size: 0.75em;
}

a[href^="mailto:"]::before {
  content: "âœ‰ ";
}

a[href^="tel:"]::before {
  content: "â˜Ž ";
}

/* ==========================================================================
   7. KEYBOARD NAVIGATION - WCAG 2.1.1, 2.1.2
   ========================================================================== */

/**
 * Ensure all interactive elements are keyboard accessible
 */
[role="button"],
[role="link"],
[role="menuitem"],
[role="tab"],
[tabindex]:not([tabindex="-1"]) {
  cursor: pointer;
}

/**
 * Minimum touch target size - 44x44px (WCAG 2.5.5)
 */
button,
.btn,
[role="button"],
input[type="submit"],
input[type="button"],
input[type="checkbox"],
input[type="radio"],
a.nav-link,
.nav-item a {
  min-height: 44px;
  min-width: 44px;
}

/**
 * Increased target spacing
 */
.touch-friendly button,
.touch-friendly a {
  padding: 12px 24px;
  margin: 4px;
}

/**
 * Focus trap indicator
 */
[data-focus-trap="true"] {
  position: relative;
}

[data-focus-trap="true"]::before {
  content: "";
  position: absolute;
  inset: -4px;
  border: 2px dashed var(--tiller-color-gold, #c9a227);
  border-radius: inherit;
  pointer-events: none;
  opacity: 0%;
  transition: opacity 0.2s;
}

[data-focus-trap="true"]:focus-within::before {
  opacity: 100%;
}

/* ==========================================================================
   8. TEXT & TYPOGRAPHY ACCESSIBILITY - WCAG 1.4.4, 1.4.8, 1.4.12
   ========================================================================== */

/**
 * Respect user font size preferences
 */
html {
  font-size: 100%; /* Base on user's browser setting */
}

/**
 * Readable line length (45-75 characters)
 */
p,
li,
dd,
blockquote {
  max-width: 75ch;
}

/**
 * Adequate line height for readability
 */
body {
  line-height: 1.5;
  letter-spacing: normal;
  word-spacing: normal;
}

p,
li {
  line-height: 1.6;
}

/**
 * Paragraph spacing
 */
p + p {
  margin-top: 1em;
}

/**
 * Large text option
 */
[data-text-size="large"] {
  font-size: 125%;
}

[data-text-size="larger"] {
  font-size: 150%;
}

/* ==========================================================================
   9. FORM ACCESSIBILITY - WCAG 1.3.5, 3.3.1, 3.3.2
   ========================================================================== */

/**
 * Form field labels
 */
label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 600;
  cursor: pointer;
}

/**
 * Required field indication
 */
label[for][data-required]::after,
.form-label.required::after {
  content: " (required)";
  color: var(--tiller-color-error, #e85a50);
  font-size: 0.875em;
}

/**
 * Form field focus styling
 */
input:not([type="checkbox"], [type="radio"]):focus,
textarea:focus,
select:focus {
  border-color: var(--tiller-color-gold, #c9a227);
  box-shadow: 0 0 0 3px rgb(201 162 39 / 25%);
  outline: none;
}

/**
 * Error state
 */
input[aria-invalid="true"],
textarea[aria-invalid="true"],
select[aria-invalid="true"],
.field-error {
  border-color: var(--tiller-color-error, #e85a50) !important;
  border-width: 2px;
}

input[aria-invalid="true"]:focus,
textarea[aria-invalid="true"]:focus {
  box-shadow: 0 0 0 3px rgb(232 90 80 / 25%);
}

/**
 * Error message styling
 */
.error-message,
[role="alert"],
.field-error-message {
  color: var(--tiller-color-error, #e85a50);
  font-size: 0.875rem;
  margin-top: 0.25rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.error-message::before,
.field-error-message::before {
  content: "âš ";
  font-size: 1.1em;
}

/**
 * Success state
 */
input[aria-invalid="false"].touched,
.field-success {
  border-color: var(--tiller-color-success, #10b981);
}

.success-message {
  color: var(--tiller-color-success, #10b981);
  font-size: 0.875rem;
  margin-top: 0.25rem;
}

.success-message::before {
  content: "âœ“ ";
}

/**
 * Form hints/instructions
 */
.form-hint,
.field-description,
[id$="-hint"],
[id$="-description"] {
  font-size: 0.875rem;
  color: var(--tiller-text-secondary, #555555);
  margin-top: 0.25rem;
}

/**
 * Autocomplete support styling
 */
input:-webkit-autofill {
  box-shadow: 0 0 0 1000px var(--tiller-bg-color, #ffffff) inset;
}

/* ==========================================================================
   10. LIVE REGIONS & ANNOUNCEMENTS
   ========================================================================== */

/**
 * Screen reader announcement containers
 */
.sr-announcer,
[role="status"],
[role="alert"],
[aria-live] {
  /* Ensure visible to screen readers */
}

/**
 * Visual feedback for live updates
 */
[aria-live="polite"]:not(:empty),
[role="status"]:not(:empty) {
  padding: 0.75rem 1rem;
  border-radius: 4px;
  background: var(--tiller-bg-color, #f0f0f0);
  border-left: 4px solid var(--tiller-color-info, #0066cc);
  margin: 0.5rem 0;
}

[aria-live="assertive"]:not(:empty),
[role="alert"]:not(:empty) {
  padding: 0.75rem 1rem;
  border-radius: 4px;
  background: #fff5f5;
  border-left: 4px solid var(--tiller-color-error, #e85a50);
  margin: 0.5rem 0;
}

/* ==========================================================================
   11. MODAL/DIALOG ACCESSIBILITY
   ========================================================================== */

/**
 * Modal backdrop
 */
[role="dialog"],
[aria-modal="true"] {
  position: fixed;
  z-index: 10000;
}

/**
 * Inert content behind modal
 */
body.modal-open > *:not([role="dialog"], .modal-backdrop) {
  /* Content behind modal should be inert */
  pointer-events: none;
}

/**
 * Focus visible within modals
 */
[role="dialog"] :focus-visible {
  outline: 3px solid var(--tiller-color-gold, #c9a227);
  outline-offset: 2px;
}

/**
 * Modal close button
 */
.modal-close,
[aria-label*="close" i] {
  min-width: 44px;
  min-height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* ==========================================================================
   12. TABLE ACCESSIBILITY - WCAG 1.3.1
   ========================================================================== */

table {
  border-collapse: collapse;
  width: 100%;
}

th,
td {
  padding: 0.75rem;
  text-align: left;
  border: 1px solid var(--tiller-border-color, #dddddd);
}

th {
  background: var(--tiller-bg-color, #f5f5f5);
  font-weight: 700;
}

/* Row focus for keyboard navigation */
tr:focus-within {
  outline: 2px solid var(--tiller-color-gold, #c9a227);
  outline-offset: -2px;
}

/* Zebra striping for readability */
tbody tr:nth-child(even) {
  background: rgb(0 0 0 / 2%);
}

/* ==========================================================================
   13. IMAGE ACCESSIBILITY
   ========================================================================== */

/**
 * Images without alt text warning (dev only)
 */
img:not([alt]) {
  outline: 3px solid var(--tiller-color-coral, #f87171) !important;
}

img[alt=""] {
  /* Decorative images - OK */
}

/**
 * Ensure images don't break layout
 */
img {
  max-width: 100%;
  height: auto;
}

/**
 * Figure and caption
 */
figure {
  margin: 1rem 0;
}

figcaption {
  font-size: 0.875rem;
  color: var(--tiller-text-secondary, #555555);
  margin-top: 0.5rem;
  text-align: center;
}

/* ==========================================================================
   14. LOADING STATES
   ========================================================================== */

/**
 * Loading indicator with screen reader text
 */
.loading,
[aria-busy="true"] {
  position: relative;
  pointer-events: none;
  opacity: 70%;
}

.loading::after,
[aria-busy="true"]::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: 24px;
  height: 24px;
  margin: -12px 0 0 -12px;
  border: 3px solid var(--tiller-color-gold, #c9a227);
  border-top-color: transparent;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: reduce) {
  .loading::after,
  [aria-busy="true"]::after {
    animation: none;
    border: 3px solid var(--tiller-color-gold, #c9a227);
  }
}

/* ==========================================================================
   15. PRINT ACCESSIBILITY
   ========================================================================== */

@media print {
  /* Show link URLs */
  a[href]::after {
    content: " (" attr(href) ")";
    font-size: 0.8em;
    color: #666666;
  }

  /* Don't print decorative elements */
  [aria-hidden="true"],
  .skip-link,
  .no-print {
    display: none !important;
  }

  /* Ensure sufficient contrast */
  * {
    color: #000000 !important;
    background: #ffffff !important;
  }

  /* Page breaks */
  h1, h2, h3 {
    break-after: avoid;
  }

  img, table, figure {
    break-inside: avoid;
  }
}

/* ==========================================================================
   16. ACCESSIBILITY PREFERENCES TOGGLE
   ========================================================================== */

/**
 * Accessibility toolbar (optional)
 */
.a11y-toolbar {
  position: fixed;
  bottom: 1rem;
  right: 1rem;
  z-index: 9999;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  background: var(--tiller-bg-color, #ffffff);
  padding: 1rem;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgb(0 0 0 / 15%);
}

.a11y-toolbar button {
  min-width: 44px;
  min-height: 44px;
  padding: 0.5rem;
  border: 2px solid currentcolor;
  border-radius: 4px;
  background: transparent;
  cursor: pointer;
  font-size: 1rem;
}

.a11y-toolbar button:hover,
.a11y-toolbar button:focus {
  background: var(--tiller-color-gold, #c9a227);
  color: var(--tiller-color-primary, #1a2a3a);
}

.a11y-toolbar button[aria-pressed="true"] {
  background: var(--tiller-color-gold, #c9a227);
  color: var(--tiller-color-primary, #1a2a3a);
}

/* ==========================================================================
   17. COGNITIVE ACCESSIBILITY
   ========================================================================== */

/**
 * Consistent focus indicator
 */
*:focus-visible {
  transition: outline-offset 0.1s ease;
}

/**
 * Clear hover states
 */
a:hover,
button:hover {
  text-decoration: underline;
}

/**
 * Dyslexia-friendly font option
 */
[data-font="dyslexia"] {
  font-family: OpenDyslexic, "Comic Sans MS", sans-serif;
  letter-spacing: 0.05em;
  word-spacing: 0.1em;
}

/**
 * Reading guide (line highlight)
 */
[data-reading-guide="true"] p:hover,
[data-reading-guide="true"] li:hover {
  background: rgb(255 255 0 / 20%);
  outline: 2px solid rgb(255 255 0 / 50%);
}

/* ==========================================================================
   18. ICON ACCESSIBILITY
   ========================================================================== */

/**
 * Ensure icons have accessible names
 */
svg[role="img"]:not([aria-label], [aria-labelledby]) {
  /* Warning: SVG needs aria-label */
}

/**
 * Decorative icons
 */
svg[aria-hidden="true"],
.icon-decorative {
  pointer-events: none;
}

/**
 * Icon buttons need visible label or aria-label
 */
button:has(svg):not([aria-label], :has(.sr-only)) {
  /* Warning: Icon button needs accessible name */
}

/* ==========================================================================
   19. TEXT-TO-SPEECH (Read Aloud) STYLES
   ========================================================================== */

/**
 * Currently being read element
 */
.tts-reading {
  background: rgb(255 235 59 / 30%) !important;
  outline: 3px solid #ffc107 !important;
  outline-offset: 2px !important;
  border-radius: 4px;
}

/**
 * TTS active indicator on body
 */
[data-tts-active="true"]::before {
  content: "ðŸ”Š Reading...";
  position: fixed;
  top: 10px;
  left: 50%;
  transform: translateX(-50%);
  padding: 8px 16px;
  background: #1a2a3a;
  color: #fff;
  border-radius: 20px;
  font-size: 14px;
  z-index: 100001;
  animation: tts-pulse 1.5s ease-in-out infinite;
}

@keyframes tts-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

@media (prefers-reduced-motion: reduce) {
  @keyframes tts-pulse {
    0%, 100% { opacity: 1; }
  }
}

/**
 * TTS controls floating panel
 */
.tts-controls {
  position: fixed;
  bottom: 80px;
  right: 20px;
  background: #fff;
  padding: 16px;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgb(0 0 0 / 20%);
  z-index: 10000;
  display: flex;
  flex-direction: column;
  gap: 8px;
  min-width: 200px;
}

.tts-controls button {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  border: 2px solid #1a2a3a;
  border-radius: 8px;
  background: #fff;
  cursor: pointer;
  font-size: 14px;
  transition: background 0.2s, color 0.2s;
}

.tts-controls button:hover,
.tts-controls button:focus {
  background: #1a2a3a;
  color: #fff;
}

.tts-controls button.active {
  background: #10b981;
  border-color: #10b981;
  color: #fff;
}

/* ==========================================================================
   20. DEAF/HARD OF HEARING SUPPORT
   ========================================================================== */

/**
 * Visual alert flash animation
 */
@keyframes a11y-flash {
  0% { opacity: 0.6; }
  100% { opacity: 0; }
}

/**
 * Visual notification slide animations
 */
@keyframes a11y-slide-in {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes a11y-slide-out {
  from {
    transform: translateX(0);
    opacity: 1;
  }
  to {
    transform: translateX(100%);
    opacity: 0;
  }
}

/**
 * Video captions warning
 */
.no-captions-warning {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: #fff3cd;
  color: #856404;
  border: 1px solid #ffeeba;
  border-radius: 4px;
  font-size: 14px;
  margin-top: 8px;
}

/**
 * Ensure visual feedback for all audio cues
 */
video:not(:has(track[kind="captions"])),
video:not(:has(track[kind="subtitles"])) {
  /* Videos without captions get a subtle indicator */
}

/**
 * Muted video indicator
 */
video[muted]::before {
  content: "ðŸ”‡";
  position: absolute;
  top: 10px;
  right: 10px;
  background: rgb(0 0 0 / 70%);
  color: #fff;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
}

/* ==========================================================================
   21. SCREEN READER OPTIMIZATIONS
   ========================================================================== */

/**
 * Ensure proper reading order
 */
main {
  /* Main content reads first */
}

aside {
  /* Sidebars read after main */
}

/**
 * Live region styling (visible but can be hidden)
 */
[aria-live="polite"],
[aria-live="assertive"],
[role="status"],
[role="alert"] {
  /* Ensure screen readers can access */
}

/**
 * Landmark visibility for development
 */
@media (prefers-reduced-motion: no-preference) {
  [role="banner"]:focus-within,
  [role="navigation"]:focus-within,
  [role="main"]:focus-within,
  [role="contentinfo"]:focus-within {
    /* Optional: highlight landmarks on focus */
  }
}

/* ==========================================================================
   22. ASSISTIVE TECHNOLOGY SUPPORT
   ========================================================================== */

/**
 * Ensure proper contrast for assistive tech overlays
 */
::selection {
  background: #0066cc;
  color: #fff;
}

/**
 * Support for browser zoom
 * Ensure layout doesn't break at 200% zoom
 */
@media (min-resolution: 192dpi) {
  html {
    /* High DPI displays */
  }
}

/**
 * Support for magnification software
 */
@media (min-width: 1px) {
  /* Ensure content reflows properly when magnified */
  body {
    overflow-x: hidden;
  }
  
  img,
  video,
  iframe {
    max-width: 100%;
    height: auto;
  }
}

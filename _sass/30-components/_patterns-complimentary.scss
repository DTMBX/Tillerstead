/* ==========================================================================
   Complementary Pattern System
   Cross-hatch tile pattern applied consistently across major sections
   Ensures visual cohesion and brand consistency
   ========================================================================== */

/* ========== Pattern Mixin ========== */
@mixin tile-crosshatch-pattern($opacity: 0.6) {
  position: relative;
}

@mixin tile-crosshatch-pattern-before($opacity: 0.6) {
  content: "";
  position: absolute;
  inset: 0;
  background-image: url("/assets/img/patterns/tile-crosshatch.svg");
  background-size: 120px 120px;
  background-repeat: repeat;
  background-position: center;
  opacity: $opacity;
  pointer-events: none;
  z-index: 0;
}

/* ========== Hero Sections ========== */
.ts-hero,
.hero,
.page-hero {
  @include tile-crosshatch-pattern(0.5);

  &::before {
    @include tile-crosshatch-pattern-before(0.5);
  }
}

/* Ensure content stays above pattern - base */
.ts-hero__inner,
.hero__inner {
  position: relative;
  z-index: 1;
}

.ts-hero > *,
.hero > *,
.page-hero > * {
  position: relative;
  z-index: 1;
}

/* Home hero - higher opacity for light backgrounds */
.page-home .ts-hero {
  @include tile-crosshatch-pattern(0.4);

  &::before {
    @include tile-crosshatch-pattern-before(0.4);
  }
}

/* ========== Major Sections ========== */
.ts-section {
  position: relative;
}

/* Base container and children positioning */
.container {
  position: relative;
  z-index: 1;
}

/* Apply subtle pattern to alternating sections */
.ts-section:nth-of-type(odd) {
  &::before {
    @include tile-crosshatch-pattern-before(0.08);
  }
}

/* Ensure content visibility in odd sections */
.ts-section:nth-of-type(odd) .container {
  position: relative;
  z-index: 1;
}

.ts-section:nth-of-type(odd) > * {
  position: relative;
  z-index: 1;
}

/* Services section - light pattern */
.ts-services {
  @include tile-crosshatch-pattern(0.1);

  &::before {
    @include tile-crosshatch-pattern-before(0.1);
  }
}

.ts-services .container,
.ts-services .ts-services__header,
.ts-services .ts-services__grid,
.ts-services .ts-services__actions {
  position: relative;
  z-index: 1;
}

/* Portfolio/Work section - light pattern */
.ts-portfolio,
.portfolio-section {
  @include tile-crosshatch-pattern(0.08);

  &::before {
    @include tile-crosshatch-pattern-before(0.08);
  }
}

.ts-portfolio .container,
.portfolio-section .container,
.ts-portfolio > *,
.portfolio-section > * {
  position: relative;
  z-index: 1;
}

/* Testimonials section - light pattern */
.ts-testimonials {
  @include tile-crosshatch-pattern(0.1);

  &::before {
    @include tile-crosshatch-pattern-before(0.1);
  }
}

.ts-testimonials .container,
.ts-testimonials .ts-testimonials__header,
.ts-testimonials .ts-testimonials__grid {
  position: relative;
  z-index: 1;
}

/* Process/Steps section - light pattern */
.ts-process,
.process-section {
  @include tile-crosshatch-pattern(0.08);

  &::before {
    @include tile-crosshatch-pattern-before(0.08);
  }
}

.ts-process .container,
.process-section .container,
.ts-process > *,
.process-section > * {
  position: relative;
  z-index: 1;
}

/* CTA sections - subtle pattern */
.ts-cta,
.cta-section,
.section-cta {
  @include tile-crosshatch-pattern(0.12);

  &::before {
    @include tile-crosshatch-pattern-before(0.12);
  }
}

.ts-cta .container,
.cta-section .container,
.section-cta .container,
.ts-cta .cta-content,
.cta-section .cta-content,
.section-cta .cta-content,
.ts-cta .cta__inner,
.cta-section .cta__inner,
.section-cta .cta__inner,
.ts-cta > *,
.cta-section > *,
.section-cta > * {
  position: relative;
  z-index: 1;
}

/* ========== Header Enhancement ========== */
.site-header {
  position: relative;

  &::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(
      90deg,
      transparent,
      color-mix(in srgb, var(--ts-color-primary) 30%, transparent),
      transparent
    );
    z-index: 1;
  }
}

/* ========== Footer Consistency ========== */
.site-footer {
  /* Already styled with cross-hatch pattern in _footer.scss */

  /* This ensures pattern sizing is consistent */

  &::before {
    background-size: 120px 120px;
    background-repeat: repeat;
    background-position: center;
  }
}

/* ========== Accessibility & Performance ========== */

/* Reduce motion - disable pattern animation if present */
@media (prefers-reduced-motion: reduce) {
  .ts-hero::before,
  .ts-section::before,
  .ts-services::before,
  .ts-portfolio::before,
  .ts-testimonials::before,
  .ts-process::before,
  .ts-cta::before {
    animation: none !important;
  }
}

/* Reduced transparency in high contrast mode */
@media (prefers-contrast: high) {
  .ts-hero::before {
    opacity: 0.8;
  }

  .ts-services::before,
  .ts-portfolio::before,
  .ts-testimonials::before {
    opacity: 0.2;
  }
}

/* Print media - hide patterns */
@media print {
  .ts-hero::before,
  .ts-section::before,
  .ts-services::before,
  .ts-portfolio::before,
  .ts-testimonials::before,
  .ts-process::before,
  .ts-cta::before,
  .site-footer::before {
    display: none;
  }
}

/* ========== Prefers Color Scheme ========== */
@media (prefers-color-scheme: dark) {
  /* Increase opacity in dark mode for visibility */
  .ts-hero::before {
    opacity: 0.7;
  }

  .ts-services::before,
  .ts-testimonials::before {
    opacity: 0.15;
  }
}

/* ========== Performance Optimization ========== */

/* Patterns use GPU acceleration for smooth rendering */
.ts-hero::before,
.ts-section::before,
.ts-services::before,
.ts-portfolio::before,
.ts-testimonials::before,
.ts-cta::before,
.site-footer::before {
  will-change: opacity;
  backface-visibility: hidden;
  transform: translateZ(0);
}
